# 个人导航网站 - 技术要求文档

## 1. 项目概述

开发一个个人导航网站系统，提供分类管理的网站导航功能，支持多种分类场景（AI、运营、本地服务、API、投资、邮箱、设计、咨询、笔记、调研、资讯等）。

## 2. 技术栈

### 2.1 后端技术栈
- **Python**: 3.10+
- **依赖管理**: Poetry
- **Web 框架**: FastAPI
- **ORM**: SQLModel
- **数据库**: SQLite3
- **模板引擎**: Jinja2
- **配置管理**: python-dotenv
- **HTTP 客户端**: requests

### 2.2 前端技术栈
- **HTML5**: 语义化标签
- **CSS 框架**: Tailwind CSS
- **UI 组件**: DaisyUI
- **图标**: Material Symbols Outlined
- **字体**:
  - Inter (sans-serif)
  - Roboto Mono (monospace)

## 3. 功能需求

### 3.1 核心功能

#### 3.1.1 导航分类管理
- 支持多个导航分类（侧边栏菜单）
- 每个分类包含：
  - ID（唯一标识）
  - 标签名称
  - 图标（Material Icons）
  - 激活状态
- 分类示例：
  - AI 工具
  - 运营平台
  - 本地服务
  - API 服务
  - 投资与数据
  - 邮箱服务
  - 设计资源
  - 咨询研究
  - 笔记与知识库
  - 调研平台
  - 资讯平台

#### 3.1.2 导航卡片管理
每个分类下支持多个导航卡片，卡片包含：
- 图标（Material Icons）
- 图标背景颜色类（Tailwind CSS）
- 图标颜色类（Tailwind CSS）
- 标题
- 副标题（可选）
- 描述
- 目标链接（支持外部链接和内部链接）

#### 3.1.3 搜索功能
- 集成 Google 搜索
- 搜索框位于页面顶部 Hero 区域
- 支持关键词搜索，在新标签页打开 Google 搜索结果

#### 3.1.4 系统状态监控
- API 状态指示器
- 状态信息：
  - 运行状态（正常/异常）
  - 颜色指示（绿色/红色）
  - Tooltip 提示
- 刷新时间显示

### 3.2 页面布局

#### 3.2.1 整体布局
- 左侧边栏（固定宽度 256px）
- 右侧主内容区（自适应）
- 最小宽度：1280px

#### 3.2.2 侧边栏（Sidebar）
- 品牌标识区域（顶部）
  - 图标
  - 网站标题
- 导航菜单区域（可滚动）
  - 菜单项列表
  - 激活状态高亮
- 底部状态栏
  - API 状态指示
  - 刷新时间

#### 3.2.3 顶部导航栏（Header）
- 高度：64px
- 显示导航链接（如"主站"）

#### 3.2.4 主内容区（Main）
- Hero 区域
  - 搜索框
  - 装饰性背景圆圈
- 内容区域
  - 分类标题
  - 卡片网格布局（响应式）
    - 1 列（小屏）
    - 2 列（中屏）
    - 3 列（大屏）
    - 4 列（超大屏）

### 3.3 交互功能

#### 3.3.1 菜单切换
- 点击侧边栏菜单项切换分类
- 无需刷新页面（SPA 风格）
- 更新激活状态样式

#### 3.3.2 卡片交互
- 鼠标悬停效果
  - 阴影加深
  - 轻微上移动画
- 点击跳转到目标链接
- 外部链接在新标签页打开

#### 3.3.3 搜索交互
- 输入搜索关键词
- 点击"Google"按钮或按回车提交
- 在新标签页打开 Google 搜索结果

#### 3.3.4 Tooltip 提示
- 鼠标悬停在图标上显示提示信息
- 平滑淡入淡出动画

## 4. 数据模型

### 4.1 分类（Category）
```python
class Category(SQLModel, table=True):
    id: Optional[int] = Field(default=None, primary_key=True)
    slug: str = Field(unique=True, index=True)  # 如 "ai", "operations"
    label: str  # 显示名称，如 "AI"
    icon: str  # Material Icon 名称
    order: int = Field(default=0)  # 排序
    active: bool = Field(default=False)  # 是否激活
    created_at: datetime = Field(default_factory=datetime.utcnow)
    updated_at: datetime = Field(default_factory=datetime.utcnow)
```

### 4.2 导航卡片（NavigationCard）
```python
class NavigationCard(SQLModel, table=True):
    id: Optional[int] = Field(default=None, primary_key=True)
    category_id: int = Field(foreign_key="category.id")
    title: str  # 卡片标题
    subtitle: Optional[str] = None  # 副标题
    description: str  # 描述
    icon: str  # Material Icon 名称
    icon_bg_class: str  # 背景颜色类
    icon_color_class: str  # 图标颜色类
    href: str  # 目标链接
    order: int = Field(default=0)  # 排序
    created_at: datetime = Field(default_factory=datetime.utcnow)
    updated_at: datetime = Field(default_factory=datetime.utcnow)
```

### 4.3 配置（SiteConfig）
```python
class SiteConfig(SQLModel, table=True):
    id: Optional[int] = Field(default=None, primary_key=True)
    key: str = Field(unique=True, index=True)
    value: str
    description: Optional[str] = None
    updated_at: datetime = Field(default_factory=datetime.utcnow)
```

## 5. API 接口设计

### 5.1 页面路由
- `GET /` - 主页（渲染 HTML）
- `GET /api/navigation` - 获取导航数据（JSON）

### 5.2 分类管理
- `GET /api/categories` - 获取所有分类
- `GET /api/categories/{slug}` - 获取单个分类详情
- `POST /api/categories` - 创建分类（管理员）
- `PUT /api/categories/{id}` - 更新分类（管理员）
- `DELETE /api/categories/{id}` - 删除分类（管理员）

### 5.3 导航卡片管理
- `GET /api/cards` - 获取所有卡片（支持分类过滤）
- `GET /api/cards/{id}` - 获取单个卡片详情
- `POST /api/cards` - 创建卡片（管理员）
- `PUT /api/cards/{id}` - 更新卡片（管理员）
- `DELETE /api/cards/{id}` - 删除卡片（管理员）

### 5.4 系统状态
- `GET /api/status` - 获取系统状态信息

### 5.5 配置管理
- `GET /api/config` - 获取站点配置
- `PUT /api/config/{key}` - 更新配置项（管理员）

## 6. 性能要求

### 6.1 响应时间
- 页面首次加载：< 2秒
- API 响应时间：< 500ms
- 菜单切换：< 100ms（客户端渲染）

### 6.2 资源优化
- 使用 CDN 加载外部资源（Tailwind CSS、字体）
- 图标使用 Material Symbols（字体图标，非图片）
- 数据库查询优化（索引、连接查询）

### 6.3 缓存策略
- 静态资源（CSS、JS、字体）：浏览器缓存
- API 数据：短期缓存（1-5分钟）
- 数据库查询：应用层缓存

## 7. 安全要求

### 7.1 输入验证
- 所有用户输入必须验证和清理
- 防止 XSS 攻击（模板引擎自动转义）
- 防止 SQL 注入（使用 ORM）

### 7.2 认证授权
- 管理接口需要认证（JWT）
- 使用环境变量存储敏感信息
- HTTPS 加密传输（生产环境）

### 7.3 CORS 配置
- 根据需要配置跨域策略
- 限制允许的来源域名

## 8. 部署要求

### 8.1 环境变量（.env）
```env
# 应用配置
APP_NAME=个人导航网站
APP_ENV=production
DEBUG=false
SECRET_KEY=your-secret-key-here

# 数据库
DATABASE_URL=sqlite:///./navigator.db

# API 配置
API_HOST=0.0.0.0
API_PORT=8000

# 外部服务
GOOGLE_SEARCH_URL=https://www.google.com/search
```

### 8.2 目录结构
```
navigator/
├── app/
│   ├── __init__.py
│   ├── main.py              # FastAPI 应用入口
│   ├── config.py            # 配置管理
│   ├── database.py          # 数据库连接
│   ├── models/              # 数据模型
│   │   ├── __init__.py
│   │   ├── category.py
│   │   ├── card.py
│   │   └── config.py
│   ├── routers/             # API 路由
│   │   ├── __init__.py
│   │   ├── pages.py
│   │   ├── categories.py
│   │   ├── cards.py
│   │   └── status.py
│   ├── services/            # 业务逻辑
│   │   ├── __init__.py
│   │   ├── navigation.py
│   │   └── status.py
│   └── templates/           # Jinja2 模板
│       └── index.html
├── static/                  # 静态资源
│   ├── css/
│   ├── js/
│   └── images/
├── docs/                    # 文档
│   └── prototype/           # 原型文件
├── tests/                   # 测试文件
├── .env.example             # 环境变量示例
├── .gitignore
├── pyproject.toml           # Poetry 配置
├── README.md
└── 技术要求.md
```

### 8.3 数据库初始化
- 自动创建数据库表（SQLModel）
- 提供初始化脚本填充默认数据
- 支持数据迁移（Alembic）

## 9. 测试要求

### 9.1 单元测试
- 模型测试
- 服务层测试
- API 路由测试

### 9.2 集成测试
- 端到端测试
- 数据库集成测试

### 9.3 测试覆盖率
- 目标覆盖率：> 80%

## 10. 开发规范

### 10.1 代码规范
- 遵循 PEP 8 规范
- 使用类型注解（Type Hints）
- 编写清晰的文档字符串

### 10.2 Git 工作流
- 使用功能分支开发
- 提交信息规范（Conventional Commits）
- 代码审查

### 10.3 依赖管理
```bash
# 安装依赖
poetry install

# 添加依赖
poetry add fastapi sqlmodel jinja2 python-dotenv requests

# 添加开发依赖
poetry add --group dev pytest pytest-cov black isort mypy
```

## 11. 浏览器兼容性

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 12. 可访问性（A11y）

- 语义化 HTML 标签
- 键盘导航支持
- ARIA 标签
- 颜色对比度符合 WCAG AA 标准

## 13. 监控与日志

### 13.1 日志记录
- 应用日志（INFO、WARNING、ERROR）
- 访问日志
- 错误追踪

### 13.2 监控指标
- API 响应时间
- 错误率
- 数据库查询性能

## 14. 扩展性考虑

### 14.1 功能扩展
- 支持用户自定义分类和卡片
- 支持多语言（国际化）
- 支持主题切换（深色/浅色模式）
- 支持卡片搜索和过滤
- 支持卡片访问统计

### 14.2 技术扩展
- 支持其他数据库（PostgreSQL、MySQL）
- 支持 Redis 缓存
- 支持全文搜索（Elasticsearch）
- 支持静态站点生成（SSG）

## 15. 文档要求

### 15.1 开发文档
- API 文档（自动生成，FastAPI Swagger）
- 数据库模型文档
- 部署文档

### 15.2 用户文档
- 使用说明
- 管理后台操作指南
- FAQ

## 16. 时间安排（参考）

### 16.1 第一阶段：基础功能
- 数据库模型设计
- API 接口开发
- 前端页面开发

### 16.2 第二阶段：功能完善
- 管理后台
- 状态监控
- 性能优化

### 16.3 第三阶段：测试与部署
- 测试
- 文档
- 部署上线

---

**文档版本**: 1.0
**最后更新**: 2025-11-21
**维护者**: 开发团队
